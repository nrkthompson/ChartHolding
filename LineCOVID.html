<!doctype html>
<html>

	<head>
		<title>Line Chart Multiple Axes</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
		<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
		</style>
	</head>

	<body>
		<div style="margin: 0 auto; disaply: block; width:90%; height: 90%;">
			<canvas id="canvas"></canvas>
		</div>
		<script>
			d3.text("https://nrkthompson.github.io/ChartHolding/Data/TwitterAll.csv", "text/csv", function(text) {
				var csv1 = d3.csv.parseRows(text);
				d3.text("https://nrkthompson.github.io/ChartHolding/Data/TwitterElite.csv", "text/csv", function(data) {
				      var csv2 = d3.csv.parseRows(data);
				      var labelNames = [];
				      var all = [];
				      var elite = [];
				      for (var i = 0, len = csv1.length; i < len; i++) {
					if (csv1[i][2].includes("COVID")) {
					  labelNames.push(csv1[i][1]);
					  all.push(Math.round(csv1[i][4]*100));
					}
				      }
				      for (var i = 0, len = csv2.length; i < len; i++) {
					if (csv2[i][2].includes("COVID")) {
					  elite.push(Math.round(csv2[i][4]*100));
					}
				      }
				      var lineChartData = {
					labels: labelNames,
					datasets: [{
					  label: 'All Users',
					  borderColor: '#04297a',
					  backgroundColor: '#04297a',
					  fill: false,
					  pointRadius: 1,
					  data: all
					}, {
					  label: 'Elites',
					  borderColor: '#34baeb',
					  backgroundColor: '#34baeb',
					  fill: false,
					  pointRadius: 1,
					  data: elite
					}]
				       }
					window.onload = function() {
					var ctx = document.getElementById('canvas').getContext('2d');
					window.myLine = Chart.Line(ctx, {
					  data: lineChartData,
					  options: {
					    responsive: true,
					    hoverMode: 'index',
					    stacked: false,
					    legend: {
						    display: false
					    },
					    title: {
						display: true,
						text: 'Percent of Tweets That Contain COVID-19 Keywords',
						padding: 1
					     },
					     scales: {
						      yAxes: [{
							  ticks: {
							      display: false,
							      min: 0,
							      max: 15,
							      stepSize: 5,
							      callback: function(value, index, values) {
								  return value + '%';
							      }
							  }
						      }],
						      xAxes: [{
							  ticks: {
							      display: false,
							      fontSize: 12
							  }
						      }]
						  }
					   }
					 });
					};
				});
			});
		</script>
	</body>

</html>

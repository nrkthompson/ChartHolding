<!DOCTYPE html>
<html>
  <script type="text/javascript">
    response.addHeader("Access-Control-Allow-Origin", "*");
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.3.9/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datamaps/0.5.9/datamaps.world.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <body>
    <style>
      body, html {width: 100%; height: 100%; margin: 0; padding: 0}
      .chart svg {display: block; width: 100%; height: 100%; border: none;}
    </style>
     <div class="chart" id='myChart' style="position: relative; width: 100%; height: 100%; border: none;"></div>
    <script type="text/javascript">
      var map = new Datamap({element: document.getElementById('myChart'),
        geographyConfig: {
                  popupOnHover: true,
                  highlightOnHover: true,
                  borderColor: '#04297a',
                  borderWidth: 0
         },
         fills: {
                defaultFill: '#04297a',
                OECD: '#34baeb'
         },
         data: {
           CAN: { fillKey: "OECD" },
           AUS: { fillKey: "OECD" },
           AUT: { fillKey: "OECD" },
           BEL: { fillKey: "OECD" },
           CHL: { fillKey: "OECD" },
           CZE: { fillKey: "OECD" },
           DNK: { fillKey: "OECD" },
           EST: { fillKey: "OECD" },
           FIN: { fillKey: "OECD" },
           FRA: { fillKey: "OECD" },
           DEU: { fillKey: "OECD" },
           GRC: { fillKey: "OECD" },
           HUN: { fillKey: "OECD" },
           ISL: { fillKey: "OECD" },
           IRL: { fillKey: "OECD" },
           ISR: { fillKey: "OECD" },
           ITA: { fillKey: "OECD" },
           JPN: { fillKey: "OECD" },
           KOR: { fillKey: "OECD" },
           LVA: { fillKey: "OECD" },
           LTU: { fillKey: "OECD" },
           LUX: { fillKey: "OECD" },
           MEX: { fillKey: "OECD" },
           NLD: { fillKey: "OECD" },
           NZL: { fillKey: "OECD" },
           NOR: { fillKey: "OECD" },
           POL: { fillKey: "OECD" },
           PRT: { fillKey: "OECD" },
           SVK: { fillKey: "OECD" },
           SVN: { fillKey: "OECD" },
           ESP: { fillKey: "OECD" },
           SWE: { fillKey: "OECD" },
           CHE: { fillKey: "OECD" },
           TUR: { fillKey: "OECD" },
           GBR: { fillKey: "OECD" },
           USA: { fillKey: "OECD" },
         },
         done: function clicker(datamap) {
            datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
                var country = String(geography.properties.name).replace(" ", "").replace(" ", "").replace(" ", "").replace(" ", "").replace(" ", "");
                parent.postMessage(country, "*");
            });
        }
       });
    </script>
  </body>
</html>

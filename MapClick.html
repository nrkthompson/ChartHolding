<!DOCTYPE html>
<html>
  <script type="text/javascript">
    response.addHeader("Access-Control-Allow-Origin", "*");
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.3.9/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datamaps/0.5.9/datamaps.world.min.js"></script>
  <body>
    <style>
      body, html {width: 100%; height: 100%; margin: 0; padding: 0}
      .chart svg {display: block; width: 100%; height: 100%; border: none;}
    </style>
     <div class="chart" id='myChart' style="position: relative; width: 100%; height: 100%; border: none;"></div>
    <script>
      var map = new Datamap({element: document.getElementById('myChart'),
        geographyConfig: {
                  popupOnHover: true,
                  highlightOnHover: true,
                  borderColor: '#04297a',
                  borderWidth: 0
         },
         fills: {
                defaultFill: '#04297a'
         },
       });
      done: function(Datamap) {
          Datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
              var country = String(geography.properties.name);
              var event = new CustomEvent('myCustomEvent', {detail: country});
              window.parent.document.dispatchEvent(event);
          });
      }
    </script>
  </body>
</html>
